# InstantRec 🎙️

> **爆速起動録音アプリ** - 思考を止めない、脳直結の音声キャプチャ体験

## 📱 コンセプト

InstantRecは「起動即録音」をコンセプトとした革新的な録音メモアプリです。アプリアイコンをタップした瞬間に録音が開始され、アイデアやメモが消える前に素早く音声をキャプチャできます。

### ✨ 特徴

- **⚡ 爆速起動**: アプリタップ → 即録音開始
- **🎯 一点突破**: 録音機能に特化したシンプル設計
- **📊 視覚フィードバック**: 明確な録音状態表示
- **🔄 シームレス体験**: 停止 → リスト → 新録音の流れが自然
- **📱 iOS 17+対応**: 最新のSwiftUI + SwiftData実装

## 🚀 主要機能

### Core Features (MVP)
- [x] 起動と同時に録音開始
- [x] 大型停止ボタン（画面大部分をタップ可能）
- [x] 録音ファイル一覧（タイムスタンプ＋録音時間表示）
- [x] 音声再生機能
- [x] スワイプ削除

### Enhanced Features
- [x] 📍 **録音状態の明確表示**
  - 🔴 「録音中」テキスト + 点滅ドット
  - 🎛️ リアルタイム音声レベルメーター（実音声連動）
  - ⚡ ウェーブフォームのパルスアニメーション
  - 🔊 音声感度最適化（-55dB無音閾値設定）
- [x] 🔄 **スムーズナビゲーション**
  - リストからの復帰時に即新録音開始
  - 権限チェックの重複回避
  - バックグラウンド復帰時の自動録音開始
  - 録音中の一覧移動機能（録音破棄オプション付き）
- [x] 🎨 **アクセシブルUI**
  - Light/Dark mode自動対応
  - Dynamic Type対応（アクセシビリティ）
  - システムカラー採用
- [x] 📤 **共有機能**
  - iOS標準シェア機能（UIActivityViewController）
  - AirDrop、メール、クラウドサービス対応
  - セキュアなファイル共有（NSItemProvider）
- [x] ⭐ **お気に入り機能**
  - 重要な録音にスター表示
  - ワンタップでお気に入り切り替え
- [x] 🕐 **スマート時間表示**
  - 相対時間表示（3分前、昨日、一昨日）
  - 絶対時間表示（7/19、2025/1/1）
  - 状況に応じた自動切り替え
- [x] 🎵 **一覧内再生システム**
  - グローバル再生状態管理
  - 録音リスト内での直接再生・一時停止
  - リアルタイム進捗表示とプログレスバー
  - 自動競合解決（複数録音の同時再生防止）

## 🏗️ 技術スタック

- **言語**: Swift 5.9+
- **UIフレームワーク**: SwiftUI
- **アーキテクチャ**: MVVM (Model-View-ViewModel)
- **データ永続化**: SwiftData
- **音声処理**: AVFoundation
- **最低サポートOS**: iOS 17.0
- **プロジェクト生成**: XcodeGen

## 📁 プロジェクト構造

```
InstantRec/
├── InstantRec.xcodeproj/          # Xcodeプロジェクト
├── project.yml                    # XcodeGen設定
├── Sources/instantrec/            # ソースコード
│   ├── App/
│   │   └── InstantRecApp.swift    # アプリエントリーポイント
│   ├── Models/
│   │   └── Recording.swift        # SwiftDataモデル（お気に入り機能付き）
│   ├── Services/
│   │   ├── AudioService.swift     # 音声処理サービス
│   │   └── PlaybackManager.swift  # グローバル再生管理サービス
│   ├── ViewModels/
│   │   ├── RecordingViewModel.swift
│   │   └── RecordingsListViewModel.swift
│   ├── Views/
│   │   ├── RecordingView.swift    # メイン録音画面
│   │   ├── RecordingsListView.swift
│   │   ├── PlaybackView.swift
│   │   ├── RecordingRowView.swift # 録音リスト行コンポーネント
│   │   └── ActivityView.swift     # 共有機能コンポーネント
│   ├── Utils/
│   │   └── DateFormatter+Extensions.swift # スマート時間表示
│   └── Info.plist                 # アプリ設定
├── docs/                          # ドキュメント
│   ├── project-concept.md         # プロジェクトコンセプト
│   └── technical-specification.md # 技術仕様書
└── README.md                      # このファイル
```

## 🛠️ 開発・ビルド手順

### 前提条件
- Xcode 15.4+
- iOS 17.0+ 対応デバイス
- XcodeGen (オプション、プロジェクト再生成時)

### セットアップ
```bash
# リポジトリをクローン
git clone https://github.com/[your-username]/instantrec.git
cd instantrec

# XcodeGenでプロジェクト生成（オプション）
xcodegen generate

# Xcodeでプロジェクトを開く
open InstantRec.xcodeproj
```

### ビルド
1. Xcodeでプロジェクトを開く
2. ターゲットデバイスを選択
3. `Cmd + R` でビルド＆実行

### 実機テスト
1. 開発者アカウントでCode Signingを設定
2. 実機を接続
3. デバイスでアプリを信頼設定
4. 爆速録音体験をテスト！

## 📋 使用方法

### 基本フロー
1. **起動**: アプリアイコンタップ
2. **許可**: 初回のみマイクロフォンアクセス許可
3. **録音**: 自動で録音開始（赤色画面＋音声レベル表示）
4. **停止**: 大型「停止」ボタンをタップ
5. **確認**: 録音リストで再生・削除が可能
6. **継続**: Backボタンで即次の録音開始

### UI要素
- **🔴 録音中表示**: 点滅ドット + "録音中"テキスト
- **📊 音声レベルメーター**: 20本のバーでリアルタイム表示
- **⏱️ 経過時間**: MM:SS形式のタイマー表示
- **🛑 停止ボタン**: 大型で押しやすいデザイン

## 🎯 設計思想

### 「やらないことリスト」
爆速というコア価値を守るために、以下の機能は**意図的に実装していません**：

- ❌ スプラッシュスクリーン
- ❌ 複雑なフォルダ分け
- ❌ 音声編集機能
- ❌ 文字起こし機能
- ❌ テーマ変更
- ❌ 過度な設定項目

### パフォーマンス最適化
- ✅ 外部ライブラリ依存ゼロ
- ✅ 起動時処理の最小化
- ✅ UIの応答性維持（60fps）
- ✅ メモリ効率的な音声処理

## 🤝 コントリビューション

このプロジェクトは「爆速起動」という一点突破のコンセプトを維持することを重視しています。

### 歓迎する改善
- 🐛 バグ修正
- ⚡ パフォーマンス改善
- 🎨 UIの洗練
- 📝 ドキュメント改善

### 慎重に検討する機能追加
- 新機能は「爆速」に影響しないか？
- UIの複雑性は増していないか？
- 本当に必要な機能か？

## 📄 ライセンス

MIT License

## 👨‍💻 開発者

個人開発プロジェクトとして開発されました。

## 🏆 開発の記録

このプロジェクトは以下の開発プロセスを経て完成しました：

1. **コンセプト設計** (docs/project-concept.md)
2. **技術仕様策定** (docs/technical-specification.md)  
3. **MVP実装** - 基本的な録音機能
4. **UI改善** - 録音状態の明確化
5. **UX最適化** - ナビゲーションの改善
6. **実機テスト** - パフォーマンス検証
7. **音声レベル連動** - リアルタイム音声可視化 (2025-07-19)
8. **アクセシビリティ強化** - Dynamic Type・Light/Dark mode対応 (2025-07-19)

### 最新の技術改善 (2025-07-19)
- ✅ **リアルタイム音声レベル表示**: ダミーアニメーションから実音声連動へ
- ✅ **音声感度最適化**: 段階的調整により最適なレスポンスを実現
- ✅ **アクセシビリティ対応**: システム設定に自動追従
- ✅ **共有機能追加**: iOS標準シェア機能でAirDrop・クラウド対応
- ✅ **スマート時間表示**: 相対時間（3分前・昨日）と絶対時間の自動切り替え
- ✅ **お気に入り機能**: 重要な録音にスター表示・操作
- ✅ **UI大幅改善**: 階層的情報表示と録音品質向上
- ✅ **パフォーマンス最適化**: 起動速度とUI応答性の大幅改善
- ✅ **録音破棄機能**: 録音中でも一覧画面に安全に移動可能
- ✅ **一覧内再生システム**: PlaybackManagerによるグローバル再生状態管理とリスト内直接操作 (2025-07-20)

---

> 💡 **思考を止めない録音体験** - アイデアが消える前に、瞬時に音声化